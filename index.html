<!DOCTYPE html>
<html>
<head>
	<title>FUBA - the new StackOverflow!!!</title>
	<link rel="stylesheet" href="main.css">
	<link rel="stylesheet" href="libs/css/fonts/font-awesome.min.css">
	<meta charset="UTF-8">
</head>

<body>

	<div id="landing_header"></div>
	<h1>FUBA - the new StackOverflow!!!</h1>

<div id="alpha_login">

	<div id='welcome'> </div>
	<div id="login"></div>

	<!-- This Script is just for displaying a welcome-message if the user is logged in or a nice message to kindly inform the user that he needs to be logged in to use the functions of our site if he is not. It is executed in the above login-div. However, to be precise, the welcome-message is generated by the welcome-div above which is filled by a function in user.js -->
	<script id="user_area" type="text/x-handlebars-template">
		<form id="login_form" onSubmit="return Login();">
			<label class="login_label">Benutzername</label>
			<input type="text" id="login_name"/>
			<label class="login_label">Passwort</label>
			<input type="password" id="login_pass"/>
			<button type="submit" id="login_button">Einloggen</button>
		</form>
		<div id="register_link_wrap">
			<a id="register_link_button" href="http://127.0.0.1:8050/register.html">Register now!</a>
		</div>
	</script>

	<!-- This template takes care of the Logout-Function, which only shows if the user is already logged in -->
	<div id="logout"></div>
	<script id="logout_template" type="text/x-handlebars-template">
		<a href="http://127.0.0.1:8050/profile.html">Get to Your personal Profile Page</a>
		<form id="logout_form" onSubmit="return Logout();">
			<button type="submit" id="logout_button">Ausloggen</button>
		</form>
	</script>


</div>


<!-- This Script is used for displaying the Input-Field-Area where a logged in user is able to post new questions. This is only displayed if the user is logged in. -->
<div id="input_area" style="display:none;"></div>

<script id="inputs" type="text/x-handlebars-template">
	<div id="input_container">
		<div class="inner_container">
			<form id="add_question" onsubmit="Submit_Question();">
				<div class="row">
					<input type="text" required id="question_title_input" placeholder="Your Question Title" value="">
				</div>
				<div class="row">
					<textarea value="" required maxlength:"2000" rows:"200" id="landing_question" type="text" value="" placeholder="Type Your Question here!" ></textarea>
				</div>
				<div class="row fullwidth"><div id="button_wrapper"><button id="question_button" type="submit" onSubmit="Submit_Question();">Submit Your Question!</button>
				</div>
			</div>
		</form> 
	</div>
</script>



<!-- Following Script is used for generating the New-Questions-Section which is only showing the very last 5 posted Questions -->
<h3 class="LP_headline">New Questions</h3>
<div id="news"></div>
<script id="news_template" type="text/x-handlebars-template">
	{{#each news}}
<div class="single_q_container">
		<div class="karma_container">
			<div class="row">
				<a onclick="karma_plus({{Q_ID}});" class="karma_plus"></a>
			</div>
			<div class="row">
				<h3 class="karma_number">{{Karma}}</h3>
			</div>
			<div class="row">
				<a onclick='karma_minus({{Q_ID}});' class="karma_minus"></a>
			</div>
		</div>
		<a class="clickable_area" href="/SingleQuestion.html?{{Q_ID}}">
		<div class="single_q_textblock">
			<p> {{Q_Asker}} posted at {{Q_Date}}</p>
			<h3>{{Q_Title}}</h3>
			<div class="single_q_text">
				<p>{{Q_Text}}</p>
				{{#if Edit_Date}}
				<p class="edit_text">Last edited at {{Edit_Date}}</p>
				{{/if}}
			</div>
		</div>
		</a>
	</div>
</div>
	{{/each}}
</script>
<h3 class="LP_headline">All Questions</h3>




<div id="questions"></div>

<!-- This is the main Script of the landing page, in which all Questions are loaded and displayed. --> 
<script id="question_template" type="text/x-handlebars-template">

	{{#each questions}}
	<div class="single_q_container">
		<div class="karma_container">
			<div class="row">
				<a onclick="karma_plus({{Q_ID}});" class="karma_plus"></a>
			</div>
			<div class="row">
				<h3 class="karma_number">{{Karma}}</h3>
			</div>
			<div class="row">
				<a onclick='karma_minus({{Q_ID}});' class="karma_minus"></a>
			</div>
		</div>
		<a class="clickable_area" href="/SingleQuestion.html?{{Q_ID}}">
		<div class="single_q_textblock">
			<p> {{Q_Asker}} asked at {{Q_Date}}</p>
			<h3>{{Q_Title}}</h3>
			<div class="single_q_text">
				<p>{{Q_Text}}</p>
				{{#if Edit_Date}}
				<p class="edit_text">Last edited at {{Edit_Date}}</p>
				{{/if}}
			</div>
		</div>
		</a>
	</div>
</div>
{{/each}}




</script>


<div class="footer">
<div class="row footer_row">
&copy; FUBA 2015 - <a href="/impressum.html">Impressum</a> - <a href="mailto:elbeshausen@hochgestalten.com">Kontakt</a>
</div>
</div>


<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"></script>
<script type="text/javascript" src="http://baqend.com/js-sdk/0.9.6/baqend.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="libs/js/bootstrap.min.js"></script>
<script type="text/javascript" src="connect.js"></script>
<script type="text/javascript" src="app.js"></script>
<script type="text/javascript" src="user.js"></script>
<script type="text/javascript" src="input.js"></script>
<script type="text/javascript" src="news.js"></script>

<script type="text/javascript">

	/*
		Submit_Question is being called when the form for adding new Questions is filled and submitted,
		it gets the necessary data from the form-fields using JQuery and calling the needed function in the QuestionController in app.js.
	*/
	function Submit_Question(){
			var temp_user = $("#landing_username").val(); //TODO
			var temp_title = $("#question_title_input").val();
			var temp_question = $("#landing_question").val();
			QuestionController.add(temp_user,temp_title,temp_question);
		}

		/*
			Login is called when a user fills the fields of the Login-Form above and submits, 
			just like Submit_Question it gets the needed values via JQuery and calls the needed function in the UserController in user.js.
		*/

		function Login(){
			var temp_user = $('#login_name').val();
			var temp_pass = $('#login_pass').val();
			UserController.login(temp_user, temp_pass);
		}

		/*
			Logout gets executed by pressing 'Logout' and just logs the user out.
		*/
		function Logout(){
			UserController.logout();
		}

		/*
			karma_plus and karma_minus are just there for transferring the right id to the QuestionController in app.js, all logic can be found there
		*/
		function karma_plus(id){
			QuestionController.karmaplus(id);
		}

		function karma_minus(id){
			QuestionController.karmaminus(id);
		}


	</script>

</body>




</html>